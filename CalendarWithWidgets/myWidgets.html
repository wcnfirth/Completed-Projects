<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title> Calendar </title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
    <!-- Navigation Bar -->
    <nav>
        <a href="./calendar.html">My Calendar</a>
        <a href="./form.html">Form Input</a>
        <a href="./myWidgets.html">My Widgets</a>
    </nav>
    <!-- Embedded youtube video -->
    <div class="video">
        <iframe width="560" height="315" src="https://www.youtube.com/embed/99nanHbjLXk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><br>
    </div>
    <!-- Embedded Twitter Timeline -->
    <div class="twitter-border">
        <div class="twitter-feed">
            <div class="tweet">
                <a class="twitter-timeline tw-align-center" data-width="400" data-height="400" href="https://twitter.com/ChicagoBears?ref_src=twsrc%5Etfw">Tweets by ChicagoBears</a>
                <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
            </div>
        </div>
    </div>
    <!-- Functions used for setting up and evaluating tic-tac-toe rules -->
    <script type="text/javascript">
        /* When reset button is clicked, reset the playing board */
        function resetCells() {
            var cells = document.getElementsByClassName("cell");

            for (var i = 0; i < cells.length; i++) {
                var cell = cells[i];

                setCellText(cell, '');
                setBackgroundColor(cell, 'gray');
            }
        }

        /* Get the color of a selected cell */
        function getSelectedColor(selectId) {
            var colorSelect = document.getElementById(selectId);
            return colorSelect.options[colorSelect.selectedIndex].value;
        }

        /* Set the background color of a cell */
        function setBackgroundColor(element, color) {
            element.style.backgroundColor = color;
        }

        /* Get the current text written in a cell */
        function getCellText(inputId) {
            var textInput = document.getElementById(inputId);
            return textInput.value;
        }

        /* Set the text written in a cell */
        function setCellText(element, text) {
            element.innerHTML = text;
        }

        /* Check if the blue or red player have won the game, if so reset it */
        function checkForWinner() {
            // All possible winning combinations
            var winningCellIds = [
                ['cell11', 'cell12', 'cell13'],
                ['cell21', 'cell22', 'cell23'],
                ['cell31', 'cell32', 'cell33'],
                ['cell11', 'cell21', 'cell31'],
                ['cell12', 'cell22', 'cell32'],
                ['cell13', 'cell23', 'cell33'],
                ['cell11', 'cell22', 'cell33'],
                ['cell13', 'cell22', 'cell31'],
            ];
            // For each possible winning combination, check if it has occurred
            winningCellIds.forEach(function(winningCells) {
                var cell1 = document.getElementById(winningCells[0]);
                var cell2 = document.getElementById(winningCells[1]);
                var cell3 = document.getElementById(winningCells[2]);
                if (cell1.style.backgroundColor === cell2.style.backgroundColor &&
                    cell1.style.backgroundColor === cell3.style.backgroundColor &&
                    (cell1.style.backgroundColor === "red" || cell1.style.backgroundColor === "blue")) {
                    alert("Winner winner chicken dinner");
                    resetCells();
                    return;
                }
            });
        }

        /* When enter button is clicked, perform the move */
        function setEnterOnclick(cellid) {
            var enterButton = document.getElementById('enter');
            enterButton.onclick = function() { changeCell(cellid); }
        }

        /* Change the text and background color of a cell when a move is made */
        function changeCell(cellid) {
            var theCell = document.getElementById(cellid);
            setBackgroundColor(theCell, getSelectedColor('color-select'));
            setCellText(theCell, getCellText('cellname'));
            checkForWinner();
        }
    </script>
    <!-- Tic Tac Toe widget -->
    <table class="tictactoe">
        <tr>
            <th> TIC TAC TOE </th>
        </tr>
        <tr>
            <th> Enter Cell Name: </th>
            <td> <input type="text" id="cellname"> </td>
        </tr>
        <tr>
            <th> Select Cell Color: </th>
            <td>
                <select id="color-select">
                  <option value="red">Red(o)</option>
                  <option value="blue">Blue(x)</option>
               </select>
            </td>
        </tr>
        <tr>
            <td> <button id="enter">Enter</button> </td>
            <td> <button id="reset" onclick="resetCells()">Reset</button> </td>
        </tr>
        <tr>
            <td>
                <!-- Playing board -->
                <table class="board" border="1">
                    <tr>
                        <td onclick="setEnterOnclick('cell11')">
                            <div id="cell11" class="cell"> </div>
                        </td>
                        <td onclick="setEnterOnclick('cell12')">
                            <div id="cell12" class="cell"> </div>
                        </td>
                        <td onclick="setEnterOnclick('cell13')">
                            <div id="cell13" class="cell"> </div>
                        </td>
                    </tr>
                    <tr>
                        <td onclick="setEnterOnclick('cell21')">
                            <div id="cell21" class="cell"> </div>
                        </td>
                        <td onclick="setEnterOnclick('cell22')">
                            <div id="cell22" class="cell"> </div>
                        </td>
                        <td onclick="setEnterOnclick('cell23')">
                            <div id="cell23" class="cell"> </div>
                        </td>
                    </tr>
                    <tr>
                        <td onclick="setEnterOnclick('cell31')">
                            <div id="cell31" class="cell"> </div>
                        </td>
                        <td onclick="setEnterOnclick('cell32')">
                            <div id="cell32" class="cell"> </div>
                        </td>
                        <td onclick="setEnterOnclick('cell33')">
                            <div id="cell33" class="cell"> </div>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>

</html>